<!DOCTYPE html>
<head>
<html lang="en">
    <head>
        <title>CLIPCO - Budget</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="css.css">
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="paralax.js"></script>
        <style type="text/css">
            #pie-svg {
                width: 50%;
            }

            .pie-slice {
                stroke: none;
                stroke-width: 5px;
                z-index: 1;
            }

            .pie-slice:hover {
                /*stroke: rgba(0,0,0,0.5);*/
            }

            .pie-border {
                fill-opacity: 1;
            }

            .pie-outline {
                -webkit-transition: 0.25s;
                -moz-transition: 0.25s;
                -ms-transition: 0.25s;
                -o-transition: 0.25s;
                transition: 0.25s;
                fill-opacity: 0 !important;
            }

            .pie-outline.show  {
                -webkit-transition: 0.25s;
                -moz-transition: 0.25s;
                -ms-transition: 0.25s;
                -o-transition: 0.25s;
                transition: 0.25s;
                fill-opacity: 0.5 !important;
            }

            .pie-info-box rect {
                fill: white;
                fill-opacity: 0.75;
                stroke: black;
                stroke-width: 5px;
                stroke-opacity: 1;
            }

            .pie-info-box .title {
                fill: black;
                transform: scale(3, 3);
            }

            .pie-info-box .body {
                fill: black;
                transform: scale(2, 2);
            }

            .pie-info-box {
                -webkit-transition: 0.25s;
                -moz-transition: 0.25s;
                -ms-transition: 0.25s;
                -o-transition: 0.25s;
                transition: 0.25s;
                opacity: 0 !important;
            }

            .pie-info-box.show {
                -webkit-transition: all 0.25s;
                -moz-transition: all 0.25s;
                -ms-transition: all 0.25s;
                -o-transition: all 0.25s;
                transition: all 0.25s;
                opacity: 1 !important;
            }

            .pie-label {
                visibility: visible;
                fill: black;
            }

            circle {
                fill: none;
                stroke-dasharray: 0 158;
                stroke-width: 50;
                transition: stroke-dasharray .3s ease;
            }

            svg {
                margin: 0 auto;
                transform: rotate(-90deg);
                background: none;
                display: block;
            }

            body {
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
            }  
        </style>
    </head>
    <body id="top">
        <div id="navbar-placeholder"></div>
        <script>
            $(function () {
                $("#navbar-placeholder").load("subpage_navbar.html");
            });
        </script>
        <div class="bg"></div>

        <div class="jumbotron text-center">
            <h1>Budget</h1>
            <p>Information of CLIPCO's budget and spending</p>
        </div>

                    <!--other slice-->
                    <path id="other-outline" class="pie-outline" fill="#66aa00"
                          fill-rule="evenodd"></path>
                    <path id="other-border" class="pie-border" fill="#ffffff"
                          fill-rule="evenodd"></path>
                    <g onmouseover="showSlice('other');" onmouseout="hideSlice('other');">
                        <path id="other-slice" class="pie-slice" fill="#66aa00"
                              d="m432.03925 168.88112l0 0c65.51663 -28.920258 136.34503 -43.8575 207.96075 -43.8575l0 514.9764z"
                              fill-rule="evenodd"></path>
                        <text id="other-label" class="pie-label" x="115" y="50" transform="scale(4,4)">Other:
                            <tspan x="125" y="65">6.6%</tspan>
                        </text>
                        <g id="other-box" class="pie-info-box" transform=translate(350,5)>
                            <rect width=400 height=320 rx=20 ry=20></rect>
                            <text class=title x=50 y=20>Other</text>
                            <text class=body x=5 y=60>budget pays for Copies,</text>
                            <text class=body x=5 y=75>License Fees and Apps for</text>
                            <text class=body x=5 y=90> iPads, STAMP Tests fees,</text>
                            <text class=body x=5 y=105> Membership fees, Insurance,</text>
                            <text class=body x=5 y=120>Bank charges, Tax Prep.,</text>
                            <text class=body x=5 y=135>Direct Give Expenses,</text>
        <div class="container-fluid bg-grey">
            <div class="row">
                <div class="col-sm-8">
                    <h2>The Budget</h2>
                    <h4>An overview of the 2017-2018 budget.</h4>
                    <p>The <span id="clip">CLIP</span> Advisory Committee (CAC) was set up by the district to help make
                        curriculum decisions with parent and teacher involvement. CAC and CLIPCO work hand in hand each year.
                        The CAC board is composed of teachers, parents, principals, and the director of our program. They
                        present funding needs to CLIPCO, which in turn raises the money to cover those needs.</p>
                    <h4><span id="device-interface">Mouse over</span> the Pie chart below for more information about each section:</h4>
                </div>
            </div>
            <div class="row text-center pie-chart">

                <svg viewBox="0.0 0.0 150.0 150.0" class="chart" id="pie-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    
                </svg>
                <script>
                    var numSlices = 4;
                    var names = ["Personnel","Materials","Professional Development","Other"];
                    var ids = ["pers","mat","profdev","other"];
                    var values = [59.4,17.6,16.4,6.6];
                    var colors = ["#4a86e8","#de3811","#ff9900","#66aa00"];

                    var svg = document.getElementById("pie-svg");

                    for(var i = 0; i < numSlices; i++){
                        console.log("creating slice: " + names[i]);
                        var slice = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                        slice.setAttribute("id",ids[i]);
                        slice.setAttribute("class","pie");
                        slice.style.stroke = colors[i];
                        slice.setAttribute("r","25");
                        slice.setAttribute("cx","75");
                        slice.setAttribute("cy","75");
                        
                        var dash = (values[i]/100.0) * 158;
                        slice.style.strokeDasharray = dash + " 158";
                        var offset = 0;
                        for(var j = 0; j < i; j++){
                            offset += values[j];
                        }
                        offset = (offset/100.0) * -158;
                        console.log(offset);
                        slice.style.strokeDashoffset = offset.toString();
                        svg.appendChild(slice);
                    }
                    
                    

                </script>
                <!-- svg show/hide script -->
                <script type="text/javascript">
                    function showSlice(slice){
                        document.getElementById(slice+'-outline').classList.add('show');
                        document.getElementById(slice+'-box').classList.add('show');
                    }
                    function hideSlice(slice){
                        document.getElementById(slice+'-outline').classList.remove('show');
                        document.getElementById(slice+'-box').classList.remove('show');

                    }

                    window.addEventListener('touchstart', function() {
                        document.getElementById("device-interface").innerHTML = "Tap on";
                        // we only need to know once that a human touched the screen, so we can stop listening now
                        window.removeEventListener('touchstart', onFirstTouch, false);
                    }, false);

                </script>
            </div>
            <footer class="container-fluid text-center bg-grey">
                <a href="#top" title="To Top"><span class="glyphicon glyphicon-chevron-up"></span></a>
            </footer>
        </div>
        <script src="js.js"></script>
    </body>
</html>